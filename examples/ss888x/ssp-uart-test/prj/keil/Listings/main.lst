C51 COMPILER V9.60.0.0   MAIN                                                              11/23/2021 15:52:42 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\src\main.c OMF2 OPTIMIZE(8,SPEED) BROWSE DEBUG PRINT(.\Listings\ma
                    -in.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /* Author: zhanyingwei<3080940495@qq.com>
   2           * 
   3           * Copyright (C) 2021 Sinh Micro, Inc.
   4           *
   5           * Licensed under the Apache License, Version 2.0 (the "License");
   6           * you may not use this file except in compliance with the License.
   7           * You may obtain a copy of the License at
   8           *
   9           *     http://www.apache.org/licenses/LICENSE-2.0
  10           *
  11           * Unless required by applicable law or agreed to in writing, software
  12           * distributed under the License is distributed on an "AS IS" BASIS,
  13           * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  14           * See the License for the specific language governing permissions and
  15           * limitations under the License.
  16           */
  17          
  18          #include "ss888x.h"
  19          
  20          static void _delay_ms(unsigned char ms)
  21          {       
  22   1          unsigned char i, j;
  23   1          do {
  24   2              i = 4;
  25   2              j = 200;
  26   2              do
  27   2              {
  28   3                  while (--j);
  29   3              } while (--i);
  30   2          } while (--ms);
  31   1      }
  32          
  33          void ssp_uart_init()
  34          {
  35   1              CLK_CTL2  |= 0x08;
  36   1              
  37   1              AFR_SSP_CON0  = 0x35;                      /* PWM 编码*/
  38   1              
  39   1              AFR_SSP_T_START = 0x01;
  40   1              AFR_SSP_T_ZERO  = 0x01;
  41   1              AFR_SSP_T_ONE   = 0x10;
  42   1              AFR_SSP_T_STOP  = 0x10;
  43   1      }
  44          
  45          void ssp_uart_tx(unsigned char dt)
  46          {
  47   1              while ((AFR_SSP_FIFOSTART & 0x01) != 0);
  48   1              AFR_SSP_DAT  = dt;
  49   1      }
  50          
  51          int main()
  52          {
  53   1              WDTCON = 0x05;                             /* disable watchdog at startup */
  54   1              
C51 COMPILER V9.60.0.0   MAIN                                                              11/23/2021 15:52:42 PAGE 2   

  55   1              MFP3  |= 0x10;                             /* P14 as ssp */
  56   1              
  57   1              ssp_uart_init();
  58   1              
  59   1              while (1) {
  60   2                      ssp_uart_tx(0xAA);
  61   2                      _delay_ms(500);
  62   2                      ssp_uart_tx(0x55);
  63   2                      _delay_ms(500);
  64   2              }
  65   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     73    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
