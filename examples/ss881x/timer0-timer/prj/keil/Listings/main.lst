C51 COMPILER V9.60.0.0   MAIN                                                              09/16/2021 17:34:28 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\src\main.c OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(..\..\inc;..\..\pr
                    -j) DEBUG PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2           * timer0-timer.c
   3           *
   4           * TIMER test.
   5           *
   6           * Author: zhanyingwei<3080940495@qq.com>
   7           * 
   8           * Copyright (C) 2021 Sinh Micro, Inc.
   9           *
  10           * Licensed under the Apache License, Version 2.0 (the "License");
  11           * you may not use this file except in compliance with the License.
  12           * You may obtain a copy of the License at
  13           *
  14           *     http://www.apache.org/licenses/LICENSE-2.0
  15           *
  16           * Unless required by applicable law or agreed to in writing, software
  17           * distributed under the License is distributed on an "AS IS" BASIS,
  18           * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  19           * See the License for the specific language governing permissions and
  20           * limitations under the License.
  21           */
  22          
  23          #include "ss881x.h"
  24          
  25          typedef unsigned char u8;
  26          typedef unsigned int u16;
  27          
  28          void timer0_init()
  29          {
  30   1          TCON1 |= 0x08;         //TCLK0=SCLK/2=2MHz       
  31   1          TMOD  |= 0x02;         //Timer0 8bit reload model
  32   1          TL0  = 0x38;           //计数值
  33   1          TH0  = 0x38;           //装载值
  34   1          ET0  = 1;              // enable ET0 IRQ
  35   1          EA   = 1;              // Enable global IRQ
  36   1          TR0  = 1;              //start-up Timer0
  37   1          
  38   1      }
  39          
  40          int main()
  41          {
  42   1          WDTCON  = 0x05;         // disable watchdog at startup
  43   1      
  44   1          P0MOD  &= ~0x01;       // P00 as GPIO output
  45   1          P0     &= ~0x01;       // P00 output low
  46   1          
  47   1          timer0_init();
  48   1          while (1) {
  49   2          }
  50   1      }
  51          
  52          #if defined(__C51__)        // keil C51 compiler
  53          void timer0_ISR() interrupt 1
  54          #else                       // SDCC compiler
C51 COMPILER V9.60.0.0   MAIN                                                              09/16/2021 17:34:28 PAGE 2   

              void timer0_ISR() __interrupt 1
              #endif
  57          {
  58   1          static u16 i;
  59   1          i++;
  60   1          if (i == 10000)            //每隔1s,P00翻转一次
  61   1          {
  62   2              P0  ^= 0x01;
  63   2              i  = 0;    
  64   2          }
  65   1      }
  66          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     70    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
